[gd_scene load_steps=26 format=3 uid="uid://cgywk5irhng6f"]

[ext_resource type="Script" path="res://scripts/helper-components/Audio2D.gd" id="2_3sroq"]
[ext_resource type="Script" path="res://scripts/helper-components/Shake2D.gd" id="3_1n1ks"]
[ext_resource type="AudioStream" uid="uid://db41fnatc8fwa" path="res://assets/audio/tanks/player-dash-1.mp3" id="3_kxji8"]
[ext_resource type="AudioStream" uid="uid://b08cew7xnwfqi" path="res://assets/audio/tanks/player-dash-2.mp3" id="4_uw3v3"]
[ext_resource type="AudioStream" uid="uid://c7v7qyq56nm4o" path="res://assets/audio/tanks/player-dash-3.mp3" id="5_o2aqs"]
[ext_resource type="Texture2D" uid="uid://v1h867arh4l5" path="res://assets/sprites/light.png" id="7_8quxn"]
[ext_resource type="Script" path="res://scripts/tank-trail.gd" id="8_hi100"]
[ext_resource type="AudioStream" uid="uid://db0ckwnvk7vmh" path="res://assets/audio/tanks/player-damage-1.mp3" id="9_27q8q"]
[ext_resource type="AudioStream" uid="uid://essypfdqc73m" path="res://assets/audio/tanks/player-damage-2.mp3" id="10_3lqs4"]
[ext_resource type="AudioStream" uid="uid://jriq00fwc1ui" path="res://assets/audio/tanks/player-damage-3.mp3" id="11_jpc63"]
[ext_resource type="AudioStream" uid="uid://br8extpl5yukj" path="res://assets/audio/tanks/player-give-up.mp3" id="12_c6msb"]
[ext_resource type="Texture2D" uid="uid://oiajdi8v6g0j" path="res://assets/sprites/shockwave.png" id="13_275p7"]
[ext_resource type="Script" path="res://scripts/graphics/shockwave.gd" id="14_a5alp"]
[ext_resource type="Texture2D" uid="uid://5q63cgm3aynd" path="res://assets/sprites/circle-particle.png" id="15_uw20a"]
[ext_resource type="Script" path="res://scripts/helper-components/Particle2D.gd" id="16_70cx8"]

[sub_resource type="Animation" id="Animation_x37e6"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("TankSprite:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_6mmyr"]
resource_name = "damage"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("TankSprite:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 0, 0, 1), Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_7jurx"]
resource_name = "death"
length = 0.2
step = 0.02
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("TankSprite:modulate")
tracks/0/interp = 0
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.02, 0.04, 0.06, 0.08, 0.1, 0.12, 0.14, 0.16, 0.18),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Color(1, 0, 0, 1), Color(1, 1, 1, 1), Color(1, 0, 0, 1), Color(1, 1, 1, 1), Color(1, 0, 0, 1), Color(1, 1, 1, 1), Color(1, 0, 0, 1), Color(1, 1, 1, 1), Color(1, 0, 0, 1), Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_0lit1"]
_data = {
"RESET": SubResource("Animation_x37e6"),
"damage": SubResource("Animation_6mmyr"),
"death": SubResource("Animation_7jurx")
}

[sub_resource type="GDScript" id="GDScript_wd5tt"]
resource_name = "tank-light"
script/source = "extends PointLight2D

@export var tank: Tank

func _ready():
	if not tank:
		return
		
	if not tank.is_client:
		queue_free()
"

[sub_resource type="Curve" id="Curve_nrhmj"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Gradient" id="Gradient_2m5ma"]
offsets = PackedFloat32Array(0)
colors = PackedColorArray(1, 1, 1, 0)

[sub_resource type="Curve" id="Curve_la3i4"]
min_value = -200.0
max_value = 200.0
_data = [Vector2(1e-05, 164.138), 0.0, 0.0, 0, 0, Vector2(1, -40.2758), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Curve" id="Curve_nf6ab"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Gradient" id="Gradient_bxq7m"]
colors = PackedColorArray(1, 1, 1, 1, 0.59, 0.59, 0.59, 1)

[node name="StarterSubcomponents" type="Node2D"]

[node name="DamageAnimation" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_0lit1")
}

[node name="DashAudio" type="AudioStreamPlayer2D" parent="."]
script = ExtResource("2_3sroq")
sounds = Array[AudioStream]([ExtResource("3_kxji8"), ExtResource("4_uw3v3"), ExtResource("5_o2aqs")])
pitch_range = 0.05

[node name="DashShake" type="Marker2D" parent="."]
scale = Vector2(0.997009, 1)
script = ExtResource("3_1n1ks")
shake_range = 1000
auto_start = true
intensity = 2.0
intensity_decay = 15.0

[node name="TankLight" type="PointLight2D" parent="."]
unique_name_in_owner = true
scale = Vector2(1.76172, 1.51172)
energy = 0.3
shadow_enabled = true
texture = ExtResource("7_8quxn")
script = SubResource("GDScript_wd5tt")
metadata/_edit_lock_ = true

[node name="TankTrail" type="Line2D" parent="."]
unique_name_in_owner = true
show_behind_parent = true
z_index = -1
width = 30.0
width_curve = SubResource("Curve_nrhmj")
gradient = SubResource("Gradient_2m5ma")
script = ExtResource("8_hi100")

[node name="HurtSound" type="AudioStreamPlayer2D" parent="."]
script = ExtResource("2_3sroq")
sounds = Array[AudioStream]([ExtResource("9_27q8q"), ExtResource("10_3lqs4"), ExtResource("11_jpc63")])
pitch_range = 0.02

[node name="GiveUpSound" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("12_c6msb")
script = ExtResource("2_3sroq")

[node name="DashShockwave" type="Sprite2D" parent="."]
visible = false
show_behind_parent = true
texture = ExtResource("13_275p7")
script = ExtResource("14_a5alp")
start_size = 0.1
grow_speed = 6.0
fade_speed = 5.0

[node name="DamageParticle" type="CPUParticles2D" parent="."]
emitting = false
amount = 12
lifetime = 0.5
explosiveness = 1.0
texture = ExtResource("15_uw20a")
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_max = 800.0
linear_accel_curve = SubResource("Curve_la3i4")
scale_amount_min = 0.0
scale_amount_max = 0.25
scale_amount_curve = SubResource("Curve_nf6ab")
color = Color(1, 0, 0, 1)
color_ramp = SubResource("Gradient_bxq7m")
script = ExtResource("16_70cx8")
external = true
